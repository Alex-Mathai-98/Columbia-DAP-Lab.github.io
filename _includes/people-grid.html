{% assign people = site.data.people | where: "category", include.category %}
{% assign show_bio = include.show_bio | default: false %}
{% assign card_size = include.card_size | default: "md" %}
{% assign fallback_image = "/files/images/default-avatar.jpg" %}

<h2 class="mt-5">{{ include.category }}</h2>
<div class="container">
  <div class="row">
    {% for person in people %}
      <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 text-center">
          <img src="{{ person.image | default: fallback_image }}"
               class="card-img-top rounded-circle mx-auto mt-3"
               style="width: {{ card_size == "lg" and "150px" or card_size == "sm" and "90px" or "120px" }};
                      height: {{ card_size == "lg" and "150px" or card_size == "sm" and "90px" or "120px" }};
                      object-fit: cover;">

          <div class="card-body">
            {% if person.homepage %}
              <h5 class="card-title mb-1"><a href="{{ person.homepage }}" target="_blank">{{ person.name }}</a></h5>
            {% else %}
              <h5 class="card-title mb-1">{{ person.name }}</h5>
            {% endif %}
          </div>

          {% if show_bio and person.bio %}
            <div class="card-footer text-start bio-hover" style="display: none;">
              <small>{{ person.bio }}</small>
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% if show_bio %}
<script>
  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('mouseenter', () => {
      let bio = card.querySelector('.bio-hover');
      if (bio) bio.style.display = 'block';
    });
    card.addEventListener('mouseleave', () => {
      let bio = card.querySelector('.bio-hover');
      if (bio) bio.style.display = 'none';
    });
  });
</script>
{% endif %}
